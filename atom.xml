<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Dylandy's Murmur]]></title>
  <link href="http://blog.dylandy.tw//atom.xml" rel="self"/>
  <link href="http://blog.dylandy.tw//"/>
  <updated>2016-05-20T21:31:36+08:00</updated>
  <id>http://blog.dylandy.tw//</id>
  <author>
    <name><![CDATA[Dylandy]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[設定 public key 進行 SSH 連線]]></title>
    <link href="http://blog.dylandy.tw//blog/2016/05/20/she-ding-public-key-jin-xing-ssh-lian-xian/"/>
    <updated>2016-05-20T19:06:07+08:00</updated>
    <id>http://blog.dylandy.tw//blog/2016/05/20/she-ding-public-key-jin-xing-ssh-lian-xian</id>
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;身為一個常常工程師，對於使用 ssh 連線登入遠端主機是家常便飯的事情，但是也常常會因為 ssh port 被一些惡意程式攻擊，導致主機的帳號密碼被猜到，從而被迫換機器或是全機重灌等等的悲劇。
有些系統工程師為了避免這樣的風險，把 ssh port 從預設的 22 port 搬移到其他的 port 上，希望能夠躲過大部分的機器人掃描，並且要求使用者的密碼要足夠複雜，但是相對於這些方法，使用 public key 來登入 ssh 主機似乎是最安全的作法，首先，足夠長度的 key length 能夠有效防止攻擊者的攻擊，並且以目前的科技與已知的演算法，並沒有有效的方法進行 key 破解，<a href="https://en.wikipedia.org/wiki/Integer_factorization">畢竟 key 的拆解</a>是一個 <a href="https://en.wikipedia.org/wiki/NP-hardness">NP-hard 的問題</a>，因此能夠使用 public key 來進行連線登入的話是一個較為安全的連線方法。</p>

<!--more-->


<ul>
<li>要使用 public key 登入遠端伺服器的第一步，就是先產生 client 端的 public key，可以參考 <a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/">Github 的範例文件</a></li>
</ul>


<script src="https://gist.github.com/dylandy/56e5ed043d616a892d0e82109910b99b.js"></script>


<p>這邊建議使用 2048 bit 以上的安全加密，目前現行的商用網站加密層級至少都達到了 2048 bit ，因此，為了安全性考量，4096 bit 是很有必要的。<br></p>

<ul>
<li>使用 ssh-copy-id 工具將我們剛剛產生的 public key 上傳到伺服器上，這個程式會在伺服器上使用者的家目錄下 .ssh 資料夾新增一個 authorized_keys 檔案，並將 client 的 public key 存在裡面，因此如果不想使用 ssh-copy-id 的人，可以自己新增一個 authorized_keys 檔案也是可以的。</li>
</ul>


<script src="https://gist.github.com/dylandy/571ace32c9ad3d548c6ae87c002ba278.js"></script>


<p>使用 Mac 的朋友如果要使用 ssh-copy-id 的話，需要另外安裝，這個程式沒有包含在 ssh 裡面，可以透過 brew 來安裝。</p>

<script src="https://gist.github.com/dylandy/bade9ef40829f51499a5a1839dec8403.js"></script>


<ul>
<li>最後要修改 /etc/ssh/sshd_conf 這個檔案，找到 PubkeyAuthentication 將 no 改成 yes，並將 PasswordAuthentication 由 yes 改成 no，限制只能透過 public key 來進行登入</li>
</ul>


<script src="https://gist.github.com/dylandy/7b2877ce6aa9f075312b99a23ddefdcd.js"></script>


<p>設定完成以後，請記得將 ssh 服務重開。</p>

<p>這樣往後就可以透過 public key 來登入了，也省下每次登入都要打一大串密碼的困擾了。</p>

<script src="https://gist.github.com/dylandy/636aa794d2cf02e33b3e72b8721b2240.js"></script>


<p>PS: 可以透過在 .ssh 資料夾下新增一個 config 檔案，將常用的登入設定寫進去，也可免去每次登入都要輸入一大堆 ip 和 domain 的麻煩，下面是一個簡單的範例。</p>

<script src="https://gist.github.com/dylandy/2aa177ffcff15e10d5657f869a0270c2.js"></script>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ruby Web Framework : 觀察與概念]]></title>
    <link href="http://blog.dylandy.tw//blog/2016/04/06/ruby-web-framework-xue-xi/"/>
    <updated>2016-04-06T00:00:00+08:00</updated>
    <id>http://blog.dylandy.tw//blog/2016/04/06/ruby-web-framework-xue-xi</id>
    <content type="html"><![CDATA[<p><br></p>

<h3>緣起</h3>

<p>前前後後寫 Ruby 也寫了一陣子，用習慣了別人寫的套件、別人寫的 framework 以後，慢慢的也對於各種套件撰寫的原理有了些好奇，開始想要自己編寫一些屬於自己的套件和 framework 來了解一些背後的原理與方法，從過年前到最近，花了一點時間來自己摸索怎麼用 Ruby 來寫一個 web framework ，在過程中學到了許多東西，慢慢的從很多方向來思考 framework 需要什麼。
在這篇裡面我會先將各個模組說明，之後會一個一個來討論。</p>

<!--more-->


<h3>觀察</h3>

<p>從以前就不喜歡看一堆的 document 來學東西，我喜歡從自己的發現中學習，高見龍前輩曾經在日本 RubyKaigi 上發表「<a href="http://rubykaigi.org/2013/talk/S41">Code Reading, Learning More about Ruby by Reading Ruby Source Code</a>」，因此我開始觀察不同的 web framework 試試看能不能有什麼發現。</p>

<h4>Web Framework 都有一個 config.ru 檔案？<br> 這是要做什麼的？</h4>

<p>首先呢，先查了一些資料，意外的發現網路上沒有太多關於 config.ru 單獨的說明，但是可以大致上了解， config.ru 是一個 Rack 的設定檔與執行檔，那什麼是 Rack 呢？</p>

<blockquote><p>Rack is a nice Ruby-fied replacement for CGI.<br>
Rack sits between all the frameworks (Rails, Sinatra, Rulers) and all the app servers (thin, unicorn, Rainbows, mongrel) as an adapter.<br>
Rack is a convenient way to build your Ruby app out of a bunch of thin layers, like a stack of pancakes. The layers are called middleware. Or pancakes, why not?<br></p>

<p> &mdash; <a href="http://codefol.io/posts/What-is-Rack-A-Primer">What Is Rack? : a Primer</a></p></blockquote>

<p>簡單的說，Rack 就是一個用 Ruby 做的 <a href="https://en.wikipedia.org/wiki/Common_Gateway_Interface">CGI</a> ，它在應用程式和伺服器之間做資料的轉換和處理，可以讓我們用更邏輯的方式來撰寫程式，對於 Ruby framework 的抽象化有很大的幫助，而 config.ru 就是 Rack 的執行點，也可以稱為設定檔，而 config.ru 是用純 Ruby 的語法所寫成，理論上，我們可以把 framework 的所有的東西都寫在 config.ru 裡面，就能執行了。但是，我們不要，也不應該這麼做，對於 Ruby 的程式撰寫，其中最重要的一個目的在於「<a href="https://en.wikipedia.org/wiki/Semantic-oriented_programming">語意化</a>」，用以提升程式<strong>可再利用性</strong>、<strong>可維護性</strong>、<strong>提升開發速度</strong>，為了維持語意化的目的，使用多檔案的架構勢必是不可少的，那，如何區分資料夾呢？</p>

<h4>每個 MVC 架構的程式對資料夾的分配好像都很類似</h4>

<p>以前寫過的各種 MVC 框架的結構感覺上都大同小異，將 Modal , Controller , View 分開來放，將設定檔放在 config 資料夾內，可以讓設定檔和程式的邏輯分開，將 Modal , Controller , View 分開，可以在設計上更加方便，至於什麼是 MVC 架構呢？<br></p>

<blockquote><p>Model–view–controller (MVC) is a software architectural pattern for implementing user interfaces on computers. It divides a given software application into three interconnected parts, so as to separate internal representations of information from the ways that information is presented to or accepted from the user.<br></p>

<ul>
<li>The model directly manages the data, logic and rules of the application.<br></li>
<li>A view can be any output representation of information, such as a chart or a diagram. Multiple views of the same information are possible, such as a bar chart for management and a tabular view for accountants.<br></li>
<li>The third part, the controller, accepts input and converts it to commands for the model or view.
<br>
<a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">Wikipedia - Modal View Controller</a></li>
</ul>
</blockquote>

<p>大部分的 framework 都有如以下的結構：</p>

<p><br><img src="http://blog.dylandy.tw//images/tree-structure.png" alt="tree structure" /></p>

<h4>Public 可以放什麼東西呢？</h4>

<p>在 Public 資料夾中，一般是放靜態檔案的地方，系統裡的靜態檔案一般可以分成以下的幾種：</p>

<ul>
<li>asset ( css / JavaScript )</li>
<li>image</li>
<li>other format file ( <em>.pdf / </em>.docs / *.xlsx &hellip; )</li>
</ul>


<p>在 Rack server 的機制裡面，這個資料夾的內容可以直接被下載，用以增加頁面加載的速度，不用透過自身 server 的重新 render ( 像是 nodejs 的 pm2 的作法 ) 這樣對於有大量靜態資源的頁面來說，是個較容易省下計算資源和增加連線效率的方法。</p>

<h4>Rakefile 是做什麼的呢？</h4>

<p>Rake 是一個 Ruby 中的任務自訂小工具，我們可以透過在 Rakefile 裡面自己撰寫一些任務，來幫忙我們加速開發與上線的麻煩點，Rakefile 裡面使用到的都是標準的 Ruby 語法，也就是說，我們可以用簡單的幾行 Ruby 就可以進行一些專案上的控制，如：DB migration, install project &hellip;我們之後會討論如何撰寫 Rakefile 的任務。</p>

<h3>簡單總結</h3>

<ul>
<li>config.ru 是一個 Rack-based 的 framework 主程式</li>
<li>MVC 框架的基本資料夾格式為：

<ul>
<li>app/

<ul>
<li>modal/</li>
<li>view/</li>
<li>controller/</li>
</ul>
</li>
<li>public/</li>
</ul>
</li>
<li>Public 是靜態檔案的集散地</li>
<li>Rakefile 定義了這個程式或 framework 所使用到的一些指令行任務</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hello World]]></title>
    <link href="http://blog.dylandy.tw//blog/2016/03/14/hello-world/"/>
    <updated>2016-03-14T23:13:07+08:00</updated>
    <id>http://blog.dylandy.tw//blog/2016/03/14/hello-world</id>
    <content type="html"><![CDATA[<p>Hello Dylandy here, this is the new blog for me. Maybe somebody use to see my privious blog on <a href="http://dylandychat.blogspot.com">blogger</a> which would probobly not update so far.<br/></p>

<p>This blog will content something about technologies, something around me and maybe some politic thinking about Taiwan as well. <br/></p>

<p>Hello, 我是迪蘭帝，經過一段時間的醞釀以後，我決定將部落格從原本的 <a href="http://dylandychat.blogspot.com">blogger</a> 搬家到 github page 上了，blogger 雖然提供了許多方便的功能，但是畢竟已經跟不上時代的腳步，
醜醜的 <a href="https://en.wikipedia.org/wiki/Responsive_web_design">RWD</a> 介面，不容易自訂 style &hellip; 等等的缺陷，所以在最近決定跳槽了。<br/></p>

<p>歡迎來到 Dylandy&rsquo;s Murmur ，翻翻我的技術筆記與聽聽我的一些牢騷，希望能夠為這個枯燥的網路帶來一些有趣的聲音。</p>
]]></content>
  </entry>
  
</feed>
